<div *ngIf="exercise" class="row">

  <div *ngIf="editMode">
    <form (ngSubmit)="onSubmit()" #exerciseForm="ngForm" class="form-horizontal">
      <div class="form-group">
        <label for="title" class="col-xs-2 col-lg-1">Title</label>
        <input type="text" class="form-control" required
               [(ngModel)]="exercise.title"
               ngControl="title" #name="ngForm" class="col-xs-10 col-lg-11">
        <div [hidden]="name.valid || name.pristine" class="alert alert-danger">
          Name is required
        </div>
      </div>

      {{results}}

      <p-autoComplete [(ngModel)]="exercise.labels" [suggestions]="results" (completeMethod)="search($event)" [multiple]="true"></p-autoComplete>


      <div class="form-group">
        <label for="text" class="col-xs-2 col-lg-1">Text</label>
        <textarea rows="20" class="form-control"
                  [(ngModel)]="exercise.text"
                  ngControl="text" class="col-xs-10 col-lg-11"></textarea>
        You could use <a href="https://github.com/showdownjs/showdown/wiki/Showdown's-Markdown-syntax" target="_blank">markdown</a> for text formatting.
      </div>

      <button type="submit" class="btn btn-default" [disabled]="!exerciseForm.form.valid">Submit</button>
    </form>
  </div>
  <div>
    <exercise-view [exercise]="exercise"></exercise-view>
    <button *ngIf="!editMode" class="btn btn-default" (click)="editMode=true">Edit</button>
  </div>

  <table *ngIf="!editMode" class="table">
    <tr *ngFor="let exerciseExecution of exercise.executions">
      <td>{{exerciseExecution.date}}</td>
      <td>
        <div *ngIf="exerciseExecution.personalPerformanceRating > 0" class="glyphicon glyphicon-star"></div>
        <div *ngIf="exerciseExecution.personalPerformanceRating > 1" class="glyphicon glyphicon-star"></div>
      </td>
    </tr>
  </table>
</div>
